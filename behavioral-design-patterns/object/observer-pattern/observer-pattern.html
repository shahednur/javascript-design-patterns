<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title></title>
  <script>
    // Subject: maintains a list of observers, facilitates adding or removing observers
    // Observer: provides a update interface for objects that need to be notified of a Subject's changes of state
    // ConcreteSubject: broadcasts notifications to observers on changes of state, stores the state of ConcreteObservers
    // ConcreteObserver: stores a reference to the ConcreteSubject, implements an update interface for the Observer to ensure state is consistent with the Subject's

    // First, let's model the list of dependent Observers a subject may have:
    function ObserverList() {
      this.observerList = [];
    }

    ObserverList.prototype.add = function(obj) {
      return this.observerList.push(obj);
    };

    ObserverList.prototype.count = function() {
      return this.observerList.length;
    };

    ObserverList.prototype.get = function(iIndex) {
      if (iIndex > -1 && index < this.observerList.length) {
        return this.observerList[iIndex];
      }
    };

    ObserverList.prototype.indexOf = function(obj, iStartIndex) {
      var i = iStartIndex;

      while (i < this.observerList.length) {
        if (this.observerList[i] === obj) {
          return i;
        }
        i++;
      }

      return -1;
    };

    ObserverList.prototype.removeAt = function(iIndex) {
      this.observerList.splice(iIndex, 1);
    };

    // Next, let's model the Subject and the ability to add, remove or notify observers on the observer list.
    function Subject() {
      this.observers = new ObserverList();
    }

    Subject.prototype.addObserver = function(observer) {
      this.observers.add(observer);
    };

    Subject.prototype.removeObserver = function(observer) {
      this.observers.removeAt(this.observers.indexOf(observer, 0));
    };

    Subject.prototype.notify = function(context) {
      var observerCount = this.observers.count();
      for (var i = 0; i < observerCount; i++) {
        this.observer.get(i).update(context);
      }
    };

    // The Observer
    function Observer() {
      this.update = function() {
          // ...
      };
    }

    // Extend an object with an extension
    function extend(obj, extension) {
      for (var key in extension) {
        obj[key] = extension[key];
      }
    }

    // References to the DOM elements
    var controlCheckbox = document.getElementById('mainCheckbox'),
    addBtn = document.getElementById('addNewObserver');
    container = document.getElementById('observersContainer');

    // Concrete Subject

    // Extend the controlling checkbox with the Subject class
    extend(controlCheckbox, new Subject());
  </script>
</head>

<body>
  <button id="addNewObserver">Add New Observer checkbox</button>
  <input type="checkbox" id="mainCheckbox" />
  <div id="observersContainer">

  </div>
</body>

</html>